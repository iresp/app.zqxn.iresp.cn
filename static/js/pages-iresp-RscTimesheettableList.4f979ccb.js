(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-iresp-RscTimesheettableList"],{"1bed":function(t,e,i){"use strict";i.r(e);var a=i("b9192"),n=i.n(a);for(var s in a)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(s);e["default"]=n.a},"21fb":function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return a}));var a={mescrollUni:i("62ac").default,uniPopup:i("3977").default},n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("cu-custom",{attrs:{bgColor:t.NavBarColor,isBack:!0}},[i("template",{attrs:{slot:"backText"},slot:"backText"},[t._v("返回")]),i("template",{attrs:{slot:"content"},slot:"content"},[t._v("工时单")]),i("template",{attrs:{slot:"right"},slot:"right"},[i("v-uni-view",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goPage("RscTimesheettableForm")}}},[t._v("新增")])],1)],2),i("mescroll-uni",{ref:"mescrollRef",attrs:{top:t.top,up:t.upOption,down:t.downOption},on:{init:function(e){arguments[0]=e=t.$handleEvent(e),t.mescrollInit.apply(void 0,arguments)},down:function(e){arguments[0]=e=t.$handleEvent(e),t.downCallback.apply(void 0,arguments)},up:function(e){arguments[0]=e=t.$handleEvent(e),t.upCallback.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"al-list cu-list"},t._l(t.list,(function(e,a){return i("v-uni-view",{key:a,staticClass:"message_text bg-white cu-item flex justify-around align-center solid-bottom margin-bottom-sm margin-top-sm",class:t.modalName=="move-box-"+a?"move-cur":"",staticStyle:{width:"100vw"},attrs:{"data-target":"move-box-"+a},on:{touchstart:function(e){arguments[0]=e=t.$handleEvent(e),t.ListTouchStart.apply(void 0,arguments)},touchmove:function(e){arguments[0]=e=t.$handleEvent(e),t.ListTouchMove.apply(void 0,arguments)},touchend:function(e){arguments[0]=e=t.$handleEvent(e),t.ListTouchEnd.apply(void 0,arguments)},click:function(i){arguments[0]=i=t.$handleEvent(i),t.goFormPage(e.id)}}},[i("v-uni-view",{staticClass:"padding-left"},[i("v-uni-view",{staticClass:"cu-avatar radius cuIcon-timesheet bg-orange"})],1),i("v-uni-view",{staticClass:"titlePad content",staticStyle:{height:"4em"}},[i("v-uni-view",{staticClass:"flex justify-start text-cut text-lg",staticStyle:{width:"26em",color:"#333","font-family":"'黑体'"}},[i("v-uni-view",{staticClass:"padding-left"},[i("v-uni-text",{staticClass:"text-black"},[t._v(t._s(e.timesheetNbr))])],1)],1),i("v-uni-view",{staticClass:"flex justify-between margin-top-xs",staticStyle:{"font-family":"'黑体'",color:"#999"}},[i("v-uni-view",{staticStyle:{"padding-left":".8rem"}},[i("v-uni-view",{staticClass:"text-content text-cut",staticStyle:{width:"18em"}},[t._v(t._s(e.status_dictText+" "+e.periodCode))])],1)],1)],1),i("v-uni-view",{staticClass:"action text-sm",staticStyle:{color:"#aaa","margin-top":"0","margin-left":"-13em",width:"10em"}},[i("v-uni-view",[i("v-uni-text",[t._v(t._s(e.resource_dictText))])],1),i("v-uni-view",[i("v-uni-text",[t._v(t._s(e.totalhours)+"小时")])],1)],1),i("v-uni-view",{staticClass:"move"},[e.wfInstanceId?i("v-uni-view",{staticStyle:{"margin-right":"0","margin-left":"2px"},on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.showBpmnDiagram(e)}}},[t._v("审批进度")]):t._e(),"Draft"===e.status||"Rejected"===e.status?i("v-uni-view",{staticStyle:{"margin-right":"0","margin-left":"2px"},on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.submitApproval(e)}}},[t._v("提交审批")]):t._e(),"Draft"===e.status||"Rejected"===e.status?i("v-uni-view",{staticClass:"bg-red",staticStyle:{"margin-right":"0","margin-left":"2px"},on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.deleteRscTimesheettable(e)}}},[t._v("删除")]):t._e()],1)],1)})),1)],1),i("v-uni-view",[i("uni-popup",{ref:"bpmnDiagram",attrs:{"background-color":"#fff"}},[i("v-uni-view",{staticClass:"popup-content",staticStyle:{"background-color":"#fff",padding:"5px"}},[i("v-uni-image",{attrs:{src:t.bpmnDiagramImage,mode:"aspectFit"}})],1)],1)],1)],1)},s=[]},7846:function(t,e,i){"use strict";i.r(e);var a=i("21fb"),n=i("1bed");for(var s in n)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(s);var o=i("828b"),c=Object(o["a"])(n["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],void 0);e["default"]=c.exports},b9192:function(t,e,i){"use strict";i("6a54");var a=i("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("c223"),i("aa9c");var n=a(i("7d11")),s=a(i("f08c")),o=a(i("de06")),c={name:"工时单",mixins:[n.default,s.default],data:function(){return{CustomBar:this.CustomBar,NavBarColor:this.NavBarColor,url:"/iresp/rscTimesheettable/list?column=createTime&order=desc",modalName:null,listTouchDirection:null,bpmnDiagramImage:""}},onShow:function(){this.mescroll&&this.mescroll.resetUpScroll()},computed:{top:function(){return 2*this.CustomBar},style:function(){var t=this.StatusBar,e=this.CustomBar,i="height:".concat(e,"px;padding-top:").concat(t,"px;");return i}},methods:{ListTouchStart:function(t){this.listTouchStart=t.touches[0].pageX},ListTouchMove:function(t){this.listTouchDirection=t.touches[0].pageX-this.listTouchStart>0?"right":"left"},ListTouchEnd:function(t){"left"==this.listTouchDirection?this.modalName=t.currentTarget.dataset.target:this.modalName=null,this.listTouchDirection=null},goPage:function(t){if(!t)return!1;this.$Router.push({name:t})},goFormPage:function(t){this.mescroll.resetUpScroll(),uni.navigateTo({url:"/pages/iresp/RscTimesheettableForm?id="+t})},goHome:function(){this.$Router.push({name:"index"})},showBpmnDiagram:function(t){var e=Math.floor(1e12*Math.random())+1;this.bpmnDiagramImage="".concat(o.default.apiUrl,"/sys/bpmn/process/").concat(t.wfInstanceId,"/diagram?t=").concat(e),this.$refs["bpmnDiagram"].open()},deleteRscTimesheettable:function(t){var e=this;this.$http.delete("/iresp/rscTimesheettable/deleteBatch?ids="+t.id).then((function(t){t.data.success?e.mescroll&&e.mescroll.resetUpScroll():alert(t.data.message)}))},submitApproval:function(t){var e=this;this.$http.post("/iresp/rscTimesheettable/".concat(t.id,"/approval/submit")).then((function(t){t.data.success?e.mescroll&&e.mescroll.resetUpScroll():alert(t.data.message)}))}}};e.default=c}}]);