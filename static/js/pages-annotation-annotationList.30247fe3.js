(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-annotation-annotationList"],{"2f25":function(t,e,n){var a=n("91f6");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=n("967d").default;i("44d3ce04",a,!0,{sourceMap:!1,shadowMode:!1})},"91f6":function(t,e,n){var a=n("c86c");e=a(!1),e.push([t.i,".e-btn[data-v-befc095c]{margin-bottom:1rem}.titlePad[data-v-befc095c]{margin-top:.6rem}.cu-list>.move-cur[data-v-befc095c]{-webkit-transform:translateX(%?-150?%);transform:translateX(%?-150?%)}.nav .cu-item.cur[data-v-befc095c]{position:flex;z-index:9;border-bottom:%?4?% solid}",""]),t.exports=e},a069:function(t,e,n){"use strict";n("6a54");var a=n("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n("3471"));n("c223"),n("aa9c"),n("5ef2"),n("d4b5");var s=a(n("7d11")),o=[{title:"通知公告",value:0},{title:"系统消息",value:1}],l={mixins:[s.default],data:function(){return{tabs:o,TabCur:0,scrollLeft:0,NavBarColor:this.NavBarColor,upOption:{page:{num:0,size:10},noMoreSize:4,empty:{tip:"~ 暂无数据 ~"},loading:"",text:"全部",isShowNoMore:!1,textNoMore:"我是有底线的 >_<"},msgList:[],read:"all",announcement1:[],msg1Count:"",msg1Title:"",announcement2:[],msg2Count:"",msg2Title:"",url:"/sys/sysAnnouncementSend/getMyAnnouncementSend",delUrl:"/sys/sysAnnouncementSend/delete",listTouchStart:0,modalName:null,listTouchDirection:null}},onShow:function(){this.mescroll&&this.mescroll.resetUpScroll()},computed:{top:function(){return 2*this.CustomBar+95},style:function(){var t=this.StatusBar,e=this.CustomBar,n="height:".concat(e,"px;padding-top:").concat(t,"px;");return n}},methods:{upCallback:function(t){var e=this;console.log("tabindex",this.TabCur);var n=this.TabCur;0==n&&this.$http.get(this.url,{params:{pageNo:t.num,pageSize:t.size,msgCategory:"1"}}).then((function(n){if(e.announcement1=n.data.result.records,e.mescroll.endSuccess(e.announcement1.length),n.data.success){console.log("res",n.data),e.msg1Count=n.data.result.total,e.msg1Title="通知("+n.data.result.total+")";var a,s=(0,i.default)(e.announcement1);try{for(s.s();!(a=s.n()).done;){var o=a.value;e.msgList.push(o)}}catch(l){s.e(l)}finally{s.f()}}1==t.num&&(e.msgList=[],e.msgList=e.msgList.concat(e.announcement1))})).catch((function(){e.mescroll.endErr()})),1==n&&this.$http.get(this.url,{params:{pageNo:t.num,pageSize:t.size,msgCategory:"2"}}).then((function(n){if(e.announcement2=n.data.result.records,e.mescroll.endSuccess(e.announcement2.length,e.msgCount),n.data.success){console.log("res sys",n.data),e.msg2Count=n.data.result.total,e.msg2Title="通知("+n.data.result.total+")";var a,s=(0,i.default)(e.announcement2);try{for(s.s();!(a=s.n()).done;){var o=a.value;e.msgList.push(o)}}catch(l){s.e(l)}finally{s.f()}}1==t.num&&(e.msgList=[],e.msgList=e.msgList.concat(e.announcement2))})).catch((function(){e.mescroll.endErr()}))},tabSelect:function(t){this.TabCur=t.currentTarget.dataset.id,this.scrollLeft=60*(t.currentTarget.dataset.id-1),this.msgList=[],this.mescroll.resetUpScroll()},goAnnotationDetail:function(t){this.mescroll.resetUpScroll(),"component"==t.openType&&t.openPage.indexOf("email")>=0?this.goEmailDetailPage(t):uni.navigateTo({url:"/pages/annotation/annotationDetail?item="+encodeURIComponent(JSON.stringify(t))})},isEmail:function(t){return"component"==t.openType&&t.openPage.indexOf("email")>=0},goEmailDetailPage:function(t){if(console.log("go",t.anntId),console.log("item",t),"0"==t.readFlag){this.mescroll.resetUpScroll();this.$http.put("/sys/sysAnnouncementSend/editByAnntIdAndUserId",{anntId:t.anntId})}uni.navigateTo({url:"/pages/mail/mailDetail?id="+t.busId})},ListTouchStart:function(t){this.listTouchStart=t.touches[0].pageX},ListTouchMove:function(t){this.listTouchDirection=t.touches[0].pageX-this.listTouchStart>0?"right":"left"},ListTouchEnd:function(t){"left"==this.listTouchDirection?this.modalName=t.currentTarget.dataset.target:this.modalName=null,this.listTouchDirection=null},deleteAnnotation:function(t){var e=this;this.$http.delete(this.delUrl+"?id="+t.id).then((function(t){console.log("结果数据9",t),t.data.success&&e.mescroll.resetUpScroll()})).catch((function(t){console.log("al delUrl请求错误2",t),e.mescroll.endErr()}))},formatDate:function(t,e){return t&&0!=t.length?t.length<e?t:t.substr(0,e):""},titleFilter:function(t,e){return t&&0!=t.length?t.length<e?t:t.substr(0,e)+"...":""}}};e.default=l},b1e6:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return a}));var a={mescrollUni:n("62ac").default},i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"bg-white"},[n("cu-custom",{attrs:{bgColor:t.NavBarColor,isBack:!0,backRouterName:"index"}},[n("template",{attrs:{slot:"backText"},slot:"backText"},[t._v("返回")]),n("template",{attrs:{slot:"content"},slot:"content"},[t._v("公告消息")])],2),n("v-uni-view",{staticClass:"container"},[n("v-uni-view",{staticClass:"solid-bottom"},[n("v-uni-scroll-view",{staticClass:"bg-white nav text-center ",attrs:{"scroll-x":!0}},[n("v-uni-view",{staticClass:"flex text-center justify-around"},t._l(t.tabs,(function(e,a){return n("v-uni-view",{key:a,staticClass:"cu-item",class:e.value==t.TabCur?"text-blue cur":"",attrs:{"data-id":e.value},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.tabSelect.apply(void 0,arguments)}}},[t._v(t._s(e.title))])})),1)],1)],1),n("mescroll-uni",{ref:"mescrollRef",attrs:{top:t.top},on:{init:function(e){arguments[0]=e=t.$handleEvent(e),t.mescrollInit.apply(void 0,arguments)},down:function(e){arguments[0]=e=t.$handleEvent(e),t.downCallback.apply(void 0,arguments)},up:function(e){arguments[0]=e=t.$handleEvent(e),t.upCallback.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"al-list cu-list"},t._l(t.msgList,(function(e,a){return n("v-uni-view",{key:a,staticClass:"message_text bg-white cu-item flex justify-around align-center solid-bottom margin-bottom-sm margin-top-sm",class:t.modalName=="move-box-"+a?"move-cur":"",staticStyle:{width:"100vw"},attrs:{"data-target":"move-box-"+a},on:{touchstart:function(e){arguments[0]=e=t.$handleEvent(e),t.ListTouchStart.apply(void 0,arguments)},touchmove:function(e){arguments[0]=e=t.$handleEvent(e),t.ListTouchMove.apply(void 0,arguments)},touchend:function(e){arguments[0]=e=t.$handleEvent(e),t.ListTouchEnd.apply(void 0,arguments)},click:function(n){arguments[0]=n=t.$handleEvent(n),t.goAnnotationDetail(e)}}},[t.isEmail(e)?n("v-uni-view",{staticClass:"padding-left"},[n("v-uni-view",{staticClass:"cu-avatar radius cuIcon-mail bg-orange"})],1):t._e(),"1"!=e.msgCategory||t.isEmail(e)?t._e():n("v-uni-view",{staticClass:"padding-left"},[n("v-uni-view",{staticClass:"cu-avatar radius cuIcon-notification bg-orange"})],1),"2"!=e.msgCategory||t.isEmail(e)?t._e():n("v-uni-view",{staticClass:"padding-left"},[n("v-uni-view",{staticClass:"cu-avatar radius cuIcon-notice bg-orange"})],1),n("v-uni-view",{staticClass:"titlePad content",staticStyle:{height:"4em"}},[n("v-uni-view",{staticClass:"flex justify-start text-cut text-lg",staticStyle:{width:"26em",color:"#333","font-family":"'黑体'"}},["0"==e.readFlag?n("v-uni-view",[n("v-uni-text",{staticClass:"cuIcon-title text-red padding-left-sm",staticStyle:{"margin-right":"-0.8em"}})],1):t._e(),n("v-uni-view",{staticClass:"padding-left"},[t.isEmail(e)&&e.emailTitle?n("v-uni-text",{staticClass:"text-black"},[t._v(t._s(t.titleFilter(e.emailTitle,12)))]):n("v-uni-text",{staticClass:"text-black"},[t._v(t._s(t.titleFilter(e.titile,12)))])],1)],1),n("v-uni-view",{staticClass:"flex justify-between margin-top-xs",staticStyle:{"font-family":"'黑体'",color:"#999"}},[t.isEmail(e)?n("v-uni-view",{staticClass:"text-content text-cut",staticStyle:{"padding-left":".8rem",width:"18em"},domProps:{innerHTML:t._s(e.msgContent)},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.goEmailDetailPage(e)}}}):t.isEmail(e)?t._e():n("v-uni-view",{staticStyle:{"padding-left":".8rem"}},[e.msgAbstract&&e.msgAbstract.length>0?n("v-uni-view",{staticClass:"text-content text-cut",staticStyle:{width:"18em"},domProps:{innerHTML:t._s(e.msgAbstract)}}):n("v-uni-view",[t._v("无摘要")])],1)],1)],1),n("v-uni-view",{staticClass:"action text-sm",staticStyle:{color:"#aaa","margin-top":"-2em","margin-left":"-13em",width:"10em"}},[n("v-uni-text",[t._v(t._s(t.formatDate(e.sendTime,10)))])],1),n("v-uni-view",{staticClass:"move"},[n("v-uni-view",{staticClass:"bg-red",staticStyle:{"margin-right":"3em","margin-left":"2px"},on:{click:function(n){n.stopPropagation(),arguments[0]=n=t.$handleEvent(n),t.deleteAnnotation(e)}}},[t._v("删除")])],1)],1)})),1)],1)],1)],1)},s=[]},c490:function(t,e,n){"use strict";n.r(e);var a=n("a069"),i=n.n(a);for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);e["default"]=i.a},eaec:function(t,e,n){"use strict";var a=n("2f25"),i=n.n(a);i.a},f8fd:function(t,e,n){"use strict";n.r(e);var a=n("b1e6"),i=n("c490");for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);n("eaec");var o=n("828b"),l=Object(o["a"])(i["default"],a["b"],a["c"],!1,null,"befc095c",null,!1,a["a"],void 0);e["default"]=l.exports}}]);